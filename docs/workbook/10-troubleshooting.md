[🌐 EN VERSION](10-troubleshooting_EN.md)

# [10] 전술 모니터링: 장애 및 인시던트 트러블슈팅 (Troubleshooting)

BCC 시스템 운용 도중 마주칠 수 있는 시스템 에러와 셧다운 징후 대처 방안입니다.

## 🚨 이슈 1: `cv2.error` 혹은 검은 화면 먹통
**(현상)** Flask 기동 시 터미널에서 빨간 에러를 뿜거나, 프론트엔드 카메라 화면이 검정색으로 멈춤.
**(진단)** 다른 프로그램(Zoom, OBS, 웹 브라우저)이 시스템 카메라 리소스를 단독으로 점유하고 있음 (Lock 걸림). 혹은 하드웨어 /dev/video0 인덱스가 0이 아님.
**(해결책)**
- 모든 화상 회의 프로그램을 완전히 끄십시오.
- Mac 환경의 경우 터미널 앱이나 에디터 앱에서 **'카메라 접근 권한(Privacy -> Camera)'** 이 체크 해제되어 있는지 확인하십시오.
- `camera.py` 라인 중 `cv2.VideoCapture(0)` 괄호 안의 숫자를 1, 2 등으로 바꿔보며 외장 웹캠의 인덱스를 맞추십시오.

---

## 🚨 이슈 2: "InsightFace 모듈 다운로드 에러"
**(현상)** 처음 백엔드를 켤 때 멈춰있더니 `ConnectionError` 나 `Timeout` 류의 에러.
**(진단)** ArcFace 모델은 `.onnx` 바이너리로 외부(주로 구글 드라이브나 해외 서버)에 저장되어 있어 이를 처음 로컬(캐시 폴더)로 다운받을 때 방화벽이나 네트워크 정책에 의해 막히는 현상.
**(해결책)**
- 로컬 사용자 폴더 `~/.insightface/models/` 내부 디렉토리를 통째로 날리고 재기동 해보십시오.
- 계속 안될 경우 InsightFace 의 깃허브 공식 릴리즈 포럼에서 `.onnx` 포맷의 `antelopev2` (압축 팩) 파일을 직접 찾아 `~/.insightface/` 에 오프라인 추출(Extract) 복사를 수행하십시오.

---

## 🚨 이슈 3: Angular SSE 프레임 바운딩 박스가 덜덜 떨리거나 엄청난 랙 유발
**(현상)** 카메라 화면은 부드러운데, 초록색 사각박스가 프레임에 제때붙어주지 못하고 잔상이 뒤늦게 쫓아옴.
**(진단)** `ChangeDetectionStrategy` 가 OnPush 로 강제되어 있거나, 파이썬 쪽 쓰레드가 과부하 걸림 (노트북 CPU 쓰로틀링).
**(해결책)**
- 파이썬 쪽에 할당된 프레임을 건너뛰는 방어로직 `time.sleep()` 값을 소량 타깃 조정.
- Angular 코드 내부 `ngZone` 안쪽에서만 좌표 변수를 수정하고 있는지 소스 코드를 면밀히 점검.
